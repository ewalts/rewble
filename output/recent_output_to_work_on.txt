ExamplesÔÉÅ
- name: create a network
  google.cloud.gcp_compute_network:
    name: "{{ resource_name }}"
    auto_create_subnetworks: 'false'
    project: "{{ gcp_project }}"
    auth_kind: "{{ gcp_cred_kind }}"
    service_account_file: "{{ gcp_cred_file }}"
    state: present
  register: network

- name: create a subnetwork
  google.cloud.gcp_compute_subnetwork:
    name: "{{ resource_name }}"
    ip_cidr_range: 10.0.0.0/16
    region: us-central1
    network: "{{ network }}"
    project: "{{ gcp_project }}"
    auth_kind: "{{ gcp_cred_kind }}"
    service_account_file: "{{ gcp_cred_file }}"
    state: present
  register: subnetwork

- name: create a network endpoint group
  google.cloud.gcp_compute_network_endpoint_group:
    name: test_object
    network: "{{ network }}"
    subnetwork: "{{ subnetwork }}"
    default_port: 90
    zone: us-central1-a
    project: test_project
    auth_kind: serviceaccount
    service_account_file: "/tmp/auth.pem"
    state: present





Var substitution!


- name: create a network
  google.cloud.gcp_compute_network:
    name: {{ rew_name }} 
    auto_create_subnetworks: {{ rew_auto_create_subnetworks }} 
    project: {{ rew_project }} 
    auth_kind: {{ rew_auth_kind_"{{gcp_cred_kind}}" }} 
    service_account_file: {{ rew_service_account_file_"{{gcp_cred_file}}" }} 
    state: {{ rew_state }} 
  register: {{ rew_register }} 

- name: create a subnetwork
  google.cloud.gcp_compute_subnetwork:
    name: {{ rew_name_"{{resource_name}}" }} 
    ip_cidr_range: {{ rew_ip_cidr_range }} 
    region: {{ rew_region_us-central1 }} 
    network: {{ rew_network }} 
    project: {{ rew_project_"{{gcp_project}}" }} 
    auth_kind: {{ rew_auth_kind_"{{gcp_cred_kind}}" }} 
    service_account_file: {{ rew_service_account_file_"{{gcp_cred_file}}" }} 
    state: {{ rew_state_present }} 
  register: {{ rew_register_subnetwork }} 

- name: create a network endpoint group
  google.cloud.gcp_compute_network_endpoint_group:
    name: {{ rew_name_test_object }} 
    network: {{ rew_network_"{{network}}" }} 
    subnetwork: {{ rew_subnetwork }} 
    default_port: {{ rew_default_port }} 
    zone: {{ rew_zone }} 
    project: {{ rew_project_test_project }} 
    auth_kind: {{ rew_auth_kind_serviceaccount }} 
    service_account_file: {{ rew_service_account_file_"/tmp/auth.pem" }} 
    state: {{ rew_state_present }} 




Vars for vars file

rew_name:  "{{ resource_name }}"
rew_auto_create_subnetworks:  'false'
rew_project:  "{{ gcp_project }}"
rew_auth_kind_"{{gcp_cred_kind}}": "{{gcp_cred_kind}}"
rew_service_account_file_"{{gcp_cred_file}}": "{{gcp_cred_file}}"
rew_state:  present
rew_register:  network
rew_name_"{{resource_name}}": "{{resource_name}}"
rew_ip_cidr_range:  10.0.0.0/16
rew_region_us-central1: us-central1
rew_network:  "{{ network }}"
rew_project_"{{gcp_project}}": "{{gcp_project}}"
rew_auth_kind_"{{gcp_cred_kind}}": "{{gcp_cred_kind}}"
rew_service_account_file_"{{gcp_cred_file}}": "{{gcp_cred_file}}"
rew_state_present: present
rew_register_subnetwork: subnetwork
rew_name_test_object: test_object
rew_network_"{{network}}": "{{network}}"
rew_subnetwork:  "{{ subnetwork }}"
rew_default_port:  90
rew_zone:  us-central1-a
rew_project_test_project: test_project
rew_auth_kind_serviceaccount: serviceaccount
rew_service_account_file_"/tmp/auth.pem": "/tmp/auth.pem"
rew_state_present: present


